<div class="container my-5">
  <h2 class="text-center mb-4">Lista de Tarefas</h2>

  <div class="d-flex justify-content-end mb-3">
    <a class="btn btn-primary" [routerLink]="['/tasks/new']">Nova Tarefa</a>
  </div>

  <table class="table table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Título</th>
        <th>Descrição</th>
        <th>Concluída</th>
        <th>Arquivo</th> <!-- Nova coluna para arquivo -->
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let task of tasks">
        <td>{{ task.id }}</td>
        <td>{{ task.title }}</td>
        <td>{{ task.description }}</td>
        <td>
          <span class="badge" [ngClass]="task.isCompleted ? 'bg-success' : 'bg-danger'">
            {{ task.isCompleted ? 'Sim' : 'Não' }}
          </span>
        </td>
        <td>
          <!-- Link para visualizar ou baixar o arquivo, caso exista -->
          <a *ngIf="task.attachmentKey" (click)="viewFile(task.attachmentKey)" class="btn btn-info btn-sm">
            Ver Arquivo
          </a>
          <span *ngIf="!task.attachmentKey" class="text-muted">Sem anexo</span>
        </td>
        <td>
          <div class="btn-group">
            <a class="btn btn-warning btn-sm" [routerLink]="['/tasks/edit', task.id]">
              Editar
            </a>
            <button class="btn btn-danger btn-sm" (click)="deleteTask(task.id)">Excluir</button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
